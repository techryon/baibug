<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous" />

    <script>
      /*   function callOpenAi() {
                  var text = event.target.innerText;
                  var code = event.target.getAttribute("data-code");

                  var myHeaders = new Headers();
                  var token = "OPENAI_API_KEY";
                  myHeaders.append("Content-Type", "application/json");
                  myHeaders.append("Accept", "application/json");
                  myHeaders.append("Authorization", "Bearer " + token);

                  const raw = JSON.stringify(
                    {
                      "model": "gpt-3.5-turbo",
                      "messages": [
                        {
                          "role": "user",
                          "content": text
                        },
                        {
                          "role": "user",
                          "content": code
                        },
                        {
                          "role": "user",
                          "content": "look at the stack trace referenced in this message and respond in valid JSON where the first key is 'human_readable_error' and value is a human readable explanation of the error, and the second key is 'code_suggestion' and the value is valid Javascript that would fix the error without textual explanation, and a third key that is 'line_number' with the line number where the code suggestion should be"
                        },    
                      ],
                      "temperature": 0.5,
                      "top_p": 1,
                      "n": 1,
                      "stream": false,
                      "max_tokens": 350,
                      "presence_penalty": 0,
                      "frequency_penalty": 0
                    }
                  )

                  var requestOptions = {
                    method: 'POST',
                    headers: myHeaders,
                    body: raw,
                    redirect: 'manual'
                  };
                  
                  fetch("https://api.openai.com/v1/chat/completions", requestOptions)
                  .then(response => response.text())
                  .then(result => {
                    var json = JSON.parse(result);
                    var results = document.getElementById("results");
                    var resultsP = results.getElementsByTagName("p")[0];
                    var resultsCode = results.getElementsByTagName("code")[0];
                    var code = JSON.parse(json.choices[0].message.content);
                    resultsP.innerHTML = code.human_readable_error;
                    resultsCode.innerHTML = code.code_suggestion;
                  })
                  .catch(error => console.log('error', error));
                } */
    </script>
  </head>
  <body class="p-3 mb-2 bg-secondary text-white">
    <div id="app">
      <h2 class="display-6">List of errors</h2>
      <div class="container">
        <div class="row">
          <div class="col-8 accordion">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button
                  class="accordion-button accordion-collapse bg-secondary text-white"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseOne"
                  aria-expanded="true"
                  aria-controls="collapseOne">
                  Uncaught ReferenceError #1
                </button>
              </h2>
            </div>
          </div>
          <div class="col-2">
            <button class="btn btn-primary btn-block" type="button">
              Suggest fix
            </button>
          </div>
        </div>
        <div id="collapseOne" class="accordion-collapse collapse">
          <p
            class="accordion-body"
            data-code="import React, { useState } from 'react';function BugComponent(){const [count, setCount] = useState;  const handleIncrement = () => {    setCount(count + 1);  };  return (    <div>      <h1>Buggy React Component</h1><p>Current count: {conut}</p><button onClick={handleIncrement}>Increment</button></div>);} export default BugComponent;">
            Uncaught ReferenceError: setcount is not defined at handleIncrement
            (App.jsx:9:5) at HTMLUnknownElement.callCallback2
            (react-dom.development.js:4164:14) at
            Object.invokeGuardedCallbackDev (react-dom.development.js:4213:16)
            at invokeGuardedCallback (react-dom.development.js:4277:31) at
            invokeGuardedCallbackAndCatchFirstError
            (react-dom.development.js:4291:25) at executeDispatch
            (react-dom.development.js:9041:3) at
            processDispatchQueueItemsInOrder (react-dom.development.js:9073:7)
            at processDispatchQueue (react-dom.development.js:9086:5) at
            dispatchEventsForPlugins (react-dom.development.js:9097:3) at
            react-dom.development.js:9288:12
          </p>
        </div>
      </div>

      <div id="results">
        <h2 class="display-6">Suggestions</h2>
        <p></p>
        <code></code>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"></script>
  </body>
</html>
